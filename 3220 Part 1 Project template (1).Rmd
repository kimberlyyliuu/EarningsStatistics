---
title: "STAT 3220 Group Project" 
author: "KHL"
fontsize: 12pt
geometry: margin=1in
urlcolor: black
output: pdf_document
header-includes:
- \usepackage{setspace}
- \onehalfspacing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE, comment=NA, warnings=FALSE,message=FALSE)
```

Reading Raw Data and Subsetting
```{r}
# Storing Data in R
firstCensusData<-read.csv("pppub20.csv")
secondCensusData <- read.csv("pppub21.csv")

# Subsetting desired variables
firstCensusData<-firstCensusData[(c("PRDTRACE", "A_HGA", "A_SEX", "PTOT_R", "PEARNVAL", "A_MARITL", "HEA", "MIG_DIV"))]
secondCensusData<-firstCensusData[(c("PRDTRACE", "A_HGA", "A_SEX", "PTOT_R", "PEARNVAL", "A_MARITL", "HEA", "MIG_DIV"))]

# Combining the subsetted datasets
compiledCensusData<-rbind(firstCensusData, secondCensusData)

#Renaming Variables
colnames(compiledCensusData)[1:3] <- c("Race", "Highest_Education", "Gender")

# Exporting as a .csv file for upload to GitHub
write.csv(compiledCensusData, "compiledCensusData.csv", row.names = FALSE)

# For further reference
CensusData<-compiledCensusData
```

Accessing Compiled and Wrangled Data via GitHub
```{r}
CensusData<-read.csv("https://raw.githubusercontent.com/kimberlyyliuu/STAT3220Project/main/compiledCensusData.csv",header=T)
```

Package Installation
```{r, echo=FALSE, warning=FALSE,results=FALSE}
# Tidyverse 
if (!requireNamespace("tidyverse", quietly = T)) install.packages("tidyverse")
library(tidyverse)
```

EDA: 
```{r}
head(CensusData)

## Using histograms
hist(CensusData$Race)
# heaviest reporting on race 1 -/> probably shoudln't build model with race as explanatory because of this biased reporting
hist(CensusData$Highest_Education)
# sufficient as explanatory
hist(CensusData$Gender)
# sufficient as explanatory; relatively equal reporting
hist(CensusData$PTOT_R)
# questionable significance, seems to be binned in a way that ambiguates data
hist(CensusData$PEARNVAL)
# Good response variable
hist(CensusData$A_MARITL)
# Look into codebook to find why this isn't binary
hist(CensusData$HEA)
# Good expalantory 
hist(CensusData$MIG_DIV)
# Oddly distributed; bimodal with odd pattern (valley immediately adjacent to mode)

# Are any of the variables reported purely quantitatively? 

more_than_50_unique <- sapply(CensusData, function(column) {
  if(is.numeric(column)) { 
    return(length(unique(column)) > 50) 
  } else {
    return(FALSE)
  }
})
quantitative_vars <- names(more_than_50_unique[more_than_50_unique])
print(quantitative_vars)
```

\sout{How to merge this data with another set?} *This chunk is unnecessary*
```{r}
# Group by a variable common to another data set.
# But what variable? 
# Whatever variable we group by, we will be limited by the number of unique responses to that variable; for example, if we group by gender, then we will only have 2 observations to perform regression analysis on. Ideally, we should have at least 30-50. 
# To find out the number of unique responses for each variable: 
number_of_responses <- sapply(CensusData, function(column) {
  if(is.numeric(column)) { 
    return(length(unique(column))) 
  } else {
    return(FALSE)
  }
})
print(number_of_responses)
```

\sout{Continued GroupBy Exploration} *This chunk is unnecessary*
```{r}
# Race (25), PTOT_R (42), and maybe Highest_Education (17) seem like viable variables to group by. 
# Extracting these variables for further analysis: 
potentialGroupBy<-CensusData[c("Race", "PTOT_R", "Highest_Education")]
results<-list()
for (i in names(potentialGroupBy)[1:3]) {
  counts<-potentialGroupBy |>
           group_by(.data[[i]]) |>
           summarize(Count=n())
  results[[i]] <- counts
}
results$Race
results$PTOT_R
results$Highest_Education
```
\sout{PTOT_R appears to be the best variable to group by statistically. It is the most evenly distributed of the three variables; each unique response has approximately the same number count. Race is highly differential in its reporting. Higher education is intermediate of the two, and could function as a backup. 

However, if another dataset possesses identical variables, it may be appended directly to the end, simply adding more observations. No redefinition of an observation would be necessary; individuals may still be the unit of an observation.} *This portion is unnnecessary*


\newpage 

# Pledege
Please type your names in the appropriate space below. Failing to do so will result in a 0 on this assignment.

"We have neither given nor received unauthorized help on this assignment"

- Member 1: Kimberly Liu
- Member 2: Hadley McQuerrey
- Member 3: Luke Schueuer 
- Member 4:

\newpage

## Background

## Data Description

## Exploratory Data Analysis

```{r, echo=FALSE}
## Use this setting of Code chunk for any plots you wish to make
## Refer to the Rmarkdown guide for sizing informaiton on your plots
```


```{r, echo=FALSE, warning=FALSE,results=FALSE}
## Use this chunk to compute any summary statistics that you want to use
## in your conclusions. 
## These will not print in your report
```

## Conclusion

\newpage

## Appendix A: Data Dictionary

|Variable Name|Abbreviated Name|Description|
|:----:|:----:|:----:|
|  |  |    |

Race = PRDTRACE
Highest_Education = A_HGA
Gender = A_SEX
TOTAL INCOME = PTOT_R
TOTAL PERSONS EARNINGS = PEARNVAL
Marital Status = A_MARITL
Health Status = HEA 
Census division of previous year of residence = MIG_DIV 



\newpage
## Appendix B: Data Rows
```{r, echo=FALSE}
# Use head() function to output first several rows

```

\newpage
## Appendix C: References

### Background
1. List your background citations here.

### Data
1. List your data citations here
Codebook for 2020: https://www2.census.gov/programs-surveys/cps/datasets/2020/march/ASEC2020ddl_pub_full.pdf 
Download for 2020: https://www.census.gov/data/datasets/2020/demo/cps/cps-asec-2020.html

Codebook for 2021: https://www2.census.gov/programs-surveys/cps/datasets/2021/march/asec2021_ddl_pub_full.pdf
Download for 2021: https://www.census.gov/data/datasets/2021/demo/cps/cps-asec-2021.html 